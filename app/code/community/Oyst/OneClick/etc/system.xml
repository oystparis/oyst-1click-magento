<?xml version="1.0"?>
<!--
/**
 * This file is part of Oyst_OneClick for Magento.
 *
 * @license All rights reserved, Oyst
 * @author Oyst <plugin@oyst.com> <@oyst>
 * @category Oyst
 * @package Oyst_OneClick
 * @copyright Copyright (c) 2017 Oyst (http://www.oyst.com)
 */
-->
<config>
    <sections>
        <oyst_oneclick translate="label" module="oyst_oneclick">
            <label>Oyst 1-Click</label>
            <tab>sales</tab>
            <frontend_type>text</frontend_type>
            <sort_order>999</sort_order>
            <show_in_default>1</show_in_default>
            <show_in_website>1</show_in_website>
            <show_in_store>1</show_in_store>
            <groups>
                <!--=============== Module information (version, contact...) ================= -->
                <informations translate="label">
                    <label>Informations</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>0</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <!-- author -->
                        <developed_by translate="label">
                            <label>Developed by</label>
                            <comment><![CDATA[<a href="http://www.oyst.com" target="_blank">www.oyst.com</a>]]></comment>
                            <frontend_type>label</frontend_type>
                            <config_path>oyst/abstract/developed_by</config_path>
                            <sort_order>11</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </developed_by>

                        <!-- email -->
                        <contact_email translate="label">
                            <label>Contact email</label>
                            <frontend_type>label</frontend_type>
                            <config_path>oyst/abstract/contact_email</config_path>
                            <sort_order>12</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </contact_email>

                        <!-- module version -->
                        <module_version translate="label">
                            <label>Module version</label>
                            <frontend_type>label</frontend_type>
                            <frontend_model>oyst_oneclick/adminhtml_version_module</frontend_model>
                            <sort_order>13</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </module_version>

                        <!-- sdk version -->
                        <gateway_version translate="label">
                            <label>Oyst SDK version</label>
                            <comment><![CDATA[<a href="https://github.com/OystParis/oyst-php" target="_blank">OystParis/oyst-php</a>]]></comment>
                            <frontend_type>label</frontend_type>
                            <frontend_model>oyst_oneclick/adminhtml_version_sdk</frontend_model>
                            <sort_order>14</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </gateway_version>
                    </fields>
                </informations>

                <!--============================== OneClick Settings ================================ -->
                <oneclick translate="label">
                    <label>1-Click</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>10</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <!-- enable -->
                        <enable translate="label">
                            <label>Enabled</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <config_path>oyst/oneclick/enable</config_path>
                            <sort_order>0</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </enable>

                        <!-- enable module logs -->
                        <log_enable translate="label">
                            <label>Enable module logs</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <config_path>oyst/oneclick/log_enable</config_path>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>1</enable>
                            </depends>
                        </log_enable>

                        <!-- mode -->
                        <mode translate="label,comment,tooltip">
                            <label>Mode</label>
                            <comment><![CDATA[<p id="oneclick-mode-comment" style="color:red; display:none;">Please note that, after changing this value, you might also need to update additional fields like API Key.</p>]]></comment>
                            <tooltip><![CDATA[Depending on the selection the extension will communicate with the 1-Click test / pre-production / production service. Choose custom, if you have to use special urls for the gateway.]]></tooltip>
                            <frontend_type>select</frontend_type>
                            <frontend_model>oyst_oneclick/adminhtml_config_mode</frontend_model>
                            <source_model>oyst_oneclick/system_config_source_mode</source_model>
                            <config_path>oyst/oneclick/mode</config_path>
                            <sort_order>2</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>1</enable>
                            </depends>
                        </mode>

                        <!-- api login -->
                        <api_login translate="label">
                            <label>API Key</label>
                            <comment>API key length must be 64 characters</comment>
                            <validate>required-entry validate-length maximum-length-64 minimum-length-64</validate>
                            <frontend_type>text</frontend_type>
                            <config_path>oyst/oneclick/api_login</config_path>
                            <sort_order>3</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>1</enable>
                            </depends>
                        </api_login>

                        <!-- api url -->
                        <api_url translate="label">
                            <label>API URL</label>
                            <validate>required-entry validate-url validate-oyst-url</validate>
                            <frontend_type>text</frontend_type>
                            <config_path>oyst/oneclick/api_url</config_path>
                            <sort_order>4</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>1</enable>
                                <mode>custom</mode>
                            </depends>
                        </api_url>

                        <!-- javascript cdn url -->
                        <oneclickjs_url translate="label">
                            <label>JavaScript CDN URL</label>
                            <frontend_type>text</frontend_type>
                            <validate>required-entry validate-url</validate>
                            <config_path>oyst/oneclick/oneclickjs_url</config_path>
                            <sort_order>5</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>1</enable>
                                <mode>custom</mode>
                            </depends>
                        </oneclickjs_url>

                        <!-- notification url -->
                        <notification_url translate="label,comment">
                            <label>Notification URL</label>
                            <validate>required-entry validate-url validate-oyst-url</validate>
                            <frontend_type>text</frontend_type>
                            <config_path>oyst/oneclick/notification_url</config_path>
                            <sort_order>6</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>1</enable>
                            </depends>
                        </notification_url>

                        <!-- system attributes -->
                        <systemattributes translate="label,comment">
                            <label>Export select system attributes as custom options</label>
                            <comment><![CDATA[Color, size and all other custom attributes are exported by default.]]></comment>
                            <frontend_type>multiselect</frontend_type>
                            <source_model>oyst_oneclick/system_config_source_systemattributes</source_model>
                            <config_path>oyst/oneclick/systemattributes</config_path>
                            <sort_order>8</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <can_be_empty>1</can_be_empty>
                            <depends>
                                <enable>1</enable>
                            </depends>
                        </systemattributes>

                        <!-- product addtocart form validate -->
                        <product_addtocart_form_validate translate="label">
                            <label>Enable native form validator to add to cart</label>
                            <comment><![CDATA[To use a custom validator, disable and implement a javascript function isCustomProductAddtocartFormValid]]></comment>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <config_path>oyst/oneclick/product_addtocart_form_validate</config_path>
                            <sort_order>9</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>
                                    <fieldset>oneclick</fieldset>
                                    <value>1</value>
                                </enable>
                            </depends>
                        </product_addtocart_form_validate>

                        <!-- allow quantity change -->
                        <allow_quantity_change translate="label">
                            <label>Allow the customer to change the quantity of purchases in the payment modal</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <config_path>oyst/oneclick/allow_quantity_change</config_path>
                            <sort_order>10</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>
                                    <fieldset>oneclick</fieldset>
                                    <value>1</value>
                                </enable>
                            </depends>
                        </allow_quantity_change>

                        <!-- should ask stock for order -->
                        <should_ask_stock translate="label">
                            <label>Should ask stock</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <config_path>oyst/oneclick/should_ask_stock</config_path>
                            <sort_order>11</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>
                                    <fieldset>oneclick</fieldset>
                                    <value>1</value>
                                </enable>
                            </depends>
                        </should_ask_stock>

                        <!-- Enable invoice auto generation -->
                        <enable_invoice_auto_generation translate="label">
                            <label>Enable invoice auto-generation</label>
                            <tooltip><![CDATA[<b>Yes</b> creation of the invoice when the order is created, the "Due amount" will be 0.<br/><b>No</b> the order remains with a "Due amount" and the invoice is not created.]]></tooltip>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <config_path>oyst/oneclick/enable_invoice_auto_generation</config_path>
                            <sort_order>12</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>
                                    <fieldset>oneclick</fieldset>
                                    <value>1</value>
                                </enable>
                            </depends>
                        </enable_invoice_auto_generation>
                    </fields>
                </oneclick>

                <!--============================== Shipments Settings ================================ -->
                <shipments translate="label">
                    <label>Shipments configuration</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>20</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <default_carrier translate="label,comment">
                            <label>Default carrier</label>
                            <comment>As a minimum, this shipping method should be activated in the mapping below.</comment>
                            <validate>validate-select</validate>
                            <frontend_type>select</frontend_type>
                            <config_path>oyst/oneclick/carrier_default</config_path>
                            <source_model>oyst_oneclick/system_config_source_shipping_methods</source_model>
                            <sort_order>0</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                            <depends>
                                <enable>
                                    <fieldset>oneclick</fieldset>
                                    <value>1</value>
                                </enable>
                            </depends>
                        </default_carrier>
                    </fields>
                </shipments>

                <!--============================== Dynamic Shipments Mapping Certified ================================ -->
                <carrier_mapping_certified translate="label">
                    <label>Certified Shipping method Mapping with 1-Click</label>
                    <comment>This section lists all the active shipping method for the 1-Click payment. The default shipment method have to be activated here.</comment>
                    <frontend_type>text</frontend_type>
                    <frontend_model>oyst_oneclick/adminhtml_system_config_form_fieldset_carrier_certified</frontend_model>
                    <sort_order>30</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                </carrier_mapping_certified>

                <!--============================== Dynamic Shipments Mapping Not Certified ================================ -->
                <carrier_mapping_notcertified translate="label">
                    <label>Not Certified Shipping method Mapping with 1-Click</label>
                    <comment>This section lists all the active shipping method for the 1-Click shipping. The default shipment method have to be activated here.</comment>
                    <frontend_type>text</frontend_type>
                    <frontend_model>oyst_oneclick/adminhtml_system_config_form_fieldset_carrier_notcertified</frontend_model>
                    <sort_order>40</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                </carrier_mapping_notcertified>

            </groups>
        </oyst_oneclick>
    </sections>
</config>
